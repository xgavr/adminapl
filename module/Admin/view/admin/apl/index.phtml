<?php
$this->headTitle('Обмен с autopartslist.ru');

$this->mainMenu()->setActiveItemId('admin');
$this->mainMenu()->setActiveUrl($this->url('apl'));

$this->pageBreadcrumbs()->setItems([
            'Главная'=>$this->url('home'),
            'Администрирование'=>$this->url('admin'),
            'Обновление с/на autopartslist.ru' => $this->url('apl')
            ]);  

?>

<div class="row">
    <div class="col-md-4">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Клиенты и сотрудники</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <p>
                    Обновление списка клиентов и сотрудников
                </p>
                <button class="btn btn-default refresh-button" value="/apl/get-clients">
                    <span class="glyphicon glyphicon-refresh" ></span>Обновить
                </button>
                
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Очистка дублей с кодом Апл
                </div>
                <div class="pull-right">
                    <button value="/client/clear-double-apl" class="btn btn-default btn-xs refresh-button"
                            title="Очистка дублей с кодом Апл">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                </div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Удаление пустых контактов
                </div>
                <div class="pull-right">
                    <button value="/contact/delete-empty-contacts/" class="btn btn-danger btn-xs refresh-table-button"
                            title="Удаление пустых контактов">
                        <span class="glyphicon glyphicon-remove" ></span>
                    </button> 
                </div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Удаление пустых клиентов
                </div>
                <div class="pull-right">
                    <button value="/client/delete-empty-clients/" class="btn btn-danger btn-xs refresh-table-button"
                            title="Удаление пустых клиентов">
                        <span class="glyphicon glyphicon-remove" ></span>
                    </button> 
                </div>
            </div>
        </div>
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Отправка выписки банка</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <button class="btn btn-default refresh-button" value="/apl/trans-bank">
                    <span class="glyphicon glyphicon-refresh" ></span>Отправить
                </button>
                
            </div>
        </div>
    </div>    

    <div class="col-md-4">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Заказы</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Импорт заказов
                </div>
                <div class="pull-right">
                    <button value="/apl/unload-order" class="btn btn-default btn-xs refresh-button"
                            title="Импорт одного заказа из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/unload-orders" class="btn btn-default btn-xs refresh-button"
                            title="Импорт заказов из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/check-orders" class="btn btn-warning btn-xs refresh-button"
                            title="Проверка импорта заказов из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/send-order" class="btn btn-info btn-xs refresh-button"
                            title="Экспорт одного заказа в АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/send-orders" class="btn btn-info btn-xs refresh-button"
                            title="Экспорт заказов в АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/order/cancel-old" class="btn btn-warning btn-xs refresh-button"
                            title="Отмена старых заказов">
                        <span class="glyphicon glyphicon-trash" ></span>
                    </button> 
                </div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Импорт комментариев
                </div>
                <div class="pull-right">
                    <button value="/apl/unload-comment" class="btn btn-default btn-xs refresh-button"
                            title="Импорт одного комментария из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/unload-comments" class="btn btn-default btn-xs refresh-button"
                            title="Импорт комментариев из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/admin/wamm-to-comments" class="btn btn-warning btn-xs refresh-button"
                            title="Добавить комментарии из вамчата">
                        <span class="glyphicon glyphicon-import" ></span>
                    </button> 
                    <button value="/apl/send-comment" class="btn btn-info btn-xs refresh-button"
                            title="Экспорт одного комментария в АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/send-comments" class="btn btn-info btn-xs refresh-button"
                            title="Экспорт комментариев в АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                </div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Перепровести все
                </div>
                <div class="pull-right">
                    <button value="/order/repost-all-order/" class="btn btn-default btn-xs refresh-button"
                            title="Заказы покупателей">З
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/vp/repost-all-vp/" class="btn btn-default btn-xs refresh-button"
                            title="Возвраты покупателей">ВП
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                </div>
            </div>
        </div>
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Автоперемещение</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Генерация
                </div>
                <div class="pull-right">
                    <button value="/pt/pt-generator" class="btn btn-default btn-xs refresh-button"
                            title="Генерация автоперемещений" disabled="true">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                </div>
            </div>
        </div>    
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Платежи</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Импорт из АПЛ
                </div>
                <div class="pull-right">
                    <button value="/apl/unload-cash" class="btn btn-default btn-xs refresh-button"
                            title="Импорт одного платежа из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/send-cash" class="btn btn-info btn-xs refresh-button"
                            title="Экспорт одного платежа в АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/apl/unload-cashes" class="btn btn-default btn-xs refresh-button"
                            title="Импорт платежей из АПЛ">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/vt/fix-user-retail" class="btn btn-default btn-xs refresh-button"
                            title="Испраить отгрузки и оплаты сотрудников">
                        <span class="glyphicon glyphicon-ruble" ></span>
                    </button> 
<!--                    <button value="/order/fix-order-retail" class="btn btn-default btn-xs refresh-button"
                            title="Испраить отгрузки">
                        <span class="glyphicon glyphicon-ruble" ></span>
                    </button> -->
                </div>
            </div>
<!--            <div class="panel-body">
                <div class="pull-left">
                    Перепровести все
                </div>
                <div class="pull-right">
                    <button value="/order/repost-all-order/" class="btn btn-default btn-xs refresh-button"
                            title="Заказы покупателей">З
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/vp/repost-all-vp/" class="btn btn-default btn-xs refresh-button"
                            title="Возвраты покупателей">ВП
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                </div>
            </div>-->
        </div>
    </div>    

    <div class="col-md-4">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Поставщики</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Обновление списка <a href="/supplier">поставщиков</a>
                </div>
                <div class="pull-right">
                    <button class="btn btn-default btn-xs refresh-button" value="/apl/get-suppliers">
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button>
                </div>    
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Импорт из АПЛ
                </div>
                <div class="pull-right">
                    <button value="/apl/unload-doc?doc=ptu" class="btn btn-default btn-xs refresh-button"
                            title="Импорт одного поступления из АПЛ">
                        <span class="glyphicon glyphicon" >Док1</span>
                    </button> 
                    <button value="/apl/unload-docs?doc=ptu" class="btn btn-default btn-xs refresh-button"
                            title="Импорт поступлений из АПЛ">
                        <span class="glyphicon glyphicon" >Доки</span>
                    </button> 
                    <button value="/apl/unload-suppliers-order" class="btn btn-default btn-xs refresh-button"
                            title="Импорт заказов поставщикам из АПЛ">
                        <span class="glyphicon glyphicon" >Зак.Пост.</span>
                    </button> 
                </div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Перепровести все
                </div>
                <div class="pull-right">
                    <button value="/ptu/repost-all-ptu/" class="btn btn-default btn-xs refresh-button"
                            title="Поступления товаров">ПТУ
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/vtp/repost-all-vtp/" class="btn btn-default btn-xs refresh-button"
                            title="Возвраты товаров поставщику">ВТП
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/vt/repost-all-vt/" class="btn btn-default btn-xs refresh-button"
                            title="Возвраты товаров">ВТ
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/st/repost-all-st/" class="btn btn-default btn-xs refresh-button"
                            title="Списания товаров">СТ
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/ot/repost-all-ot/" class="btn btn-default btn-xs refresh-button"
                            title="Оприходование товаров">ОТ
<!--                        <span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
<!--                    <button value="/admin/doc-register/" class="btn btn-warning btn-xs refresh-button"
                            title="Регистрация">РД
                    </button> -->
                    <button value="/proc/varact/" class="btn btn-warning btn-xs refresh-button"
                            title="Восстановление последовательности">ВП
                    </button> 
                </div>
            </div>
            <div class="panel-body">
                <div class="pull-left">
                    Отправить
                </div>
                <div class="pull-right">
                    <button value="/apl/send-ptu/" class="btn btn-default btn-xs refresh-button"
                            title="Поступления товаров">ПТУ
                        <!--<span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/apl/send-vtp/" class="btn btn-default btn-xs refresh-button"
                            title="Возврат товаров постащику">ВТП
                        <!--<span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/apl/send-ot/" class="btn btn-default btn-xs refresh-button"
                            title="Оприходование товаров">OT
                        <!--<span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/apl/send-st/" class="btn btn-default btn-xs refresh-button"
                            title="Списание товаров">СT
                        <!--<span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/apl/send-pt/" class="btn btn-default btn-xs refresh-button"
                            title="Перемещение товаров">ПT
                        <!--<span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
                    <button value="/apl/send-vt/" class="btn btn-default btn-xs refresh-button"
                            title="Возврат товаров">ВT
                        <!--<span class="glyphicon glyphicon-refresh" ></span>-->
                    </button> 
<!--                    <button value="/vtp/repost-all-vtp/" class="btn btn-default btn-xs refresh-button"
                            title="Возвраты товаров поставщику">ВТП
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/vt/repost-all-vt/" class="btn btn-default btn-xs refresh-button"
                            title="Возвраты товаров">ВТ
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> 
                    <button value="/st/repost-all-st/" class="btn btn-default btn-xs refresh-button"
                            title="Списания товаров">СТ
                        <span class="glyphicon glyphicon-refresh" ></span>
                    </button> -->
                </div>
            </div>
        </div>
        <div class="panel-group">
            <div class="panel panel-success">
                <div class="panel-heading">
                    Обмен товаров с АПЛ
                </div>
                <div class="panel-body">
                    <div class="pull-left">
                        Всего товаров <span id="total" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/goods/assembly-queue/" class="btn btn-info btn-xs refresh-table-button"
                                title="Генерация товаров">
                            <span class="glyphicon glyphicon-refresh" ></span>
                        </button> 
                        <button value="/goods/delete-empty/" class="btn btn-danger btn-xs refresh-table-button"
                                title="Удаление пустых">
                            <span class="glyphicon glyphicon-remove" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">
                    <div class="pull-left">
                        AplId <span id="aplIds" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-good-apl-id/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление AplId">
                            <span class="glyphicon glyphicon-refresh" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">
                    <div class="pull-left">
                        Группы <span id="aplGroups" class="badge">0</span>/<span id="statusGroupEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-group-apl-id/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление групп Apl">
                            <span class="glyphicon glyphicon-refresh" ></span>
                        </button> 
                        <button value="/apl/update-good-group/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление групп в АПЛ">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Номера <span id="totalOemEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-good-oem/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление номеров">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Картинки <span id="totalImgEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-good-img/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление картинок">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Mашины <span id="totalCarEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-good-car/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление машин">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Описания <span id="totalAttrEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-attribute-apl-id/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление атрибутов">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                        <button value="/apl/update-attribute-value-apl-id/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление значений атрибутов">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                        <button value="/apl/update-good-attribute/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление атрибутов товаров">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Строки прайсов <span id="totalRawpriceEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
<!--                                <button value="/goods/compare-good-rawprice/" class="btn btn-info btn-xs refresh-table-button"
                                title="Сравнение строк прайсов">
                            <span class="glyphicon glyphicon-refresh" ></span>
                        </button> -->
                        <button value="/apl/update-rawprices/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление строк прайсов">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
<!--                                <button value="/apl/update-good-rawprice/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление статуса товаров">
                            <span class="glyphicon glyphicon-refresh" ></span>
                        </button> -->
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Наименования <span id="totalNameEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-good-names/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление наименований">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
                <div class="panel-body">                        
                    <div class="pull-left">
                        Цены <span id="totalPriceEx" class="badge">0</span>
                    </div>
                    <div class="pull-right">
                        <button value="/apl/update-good-prices/" class="btn btn-info btn-xs refresh-table-button"
                                title="Обновление цен">
                            <span class="glyphicon glyphicon-export" ></span>
                        </button> 
                    </div>
                </div>
            </div>                    
        </div> 
    </div>    

</div>

<div class="row">
    <div class="col-xs-4">
    </div>
</div>    

<!--    <div class="col-md-4">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Обновление прайсов</h3>
                <div class="clearfix"></div>
            </div>
            <div class="panel-body">
                <button class="btn btn-default refresh-button" value="/apl/update-good-rawprice">
                    <span class="glyphicon glyphicon-refresh" ></span>Обновить
                </button>
                
            </div>
        </div>
    </div>    -->

<script type="text/javascript">
    function totalFeatures(){
        $(".badge").each(function( index ) {
            var node = $(this).attr('id');
            $.getJSON('/goods/total-feature/?feature=' + node, function(data){
                $('#'+node).text(data['total']);
            });
        });        
    }

    $(window).on('load', function() {
        totalFeatures();
    });
    
</script>